<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>net.lewisship.trace documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">io.github.hlship/trace</span> <span class="project-version">v1.0</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1 current"><a href="net.lewisship.trace.html"><div class="inner"><span>net.lewisship.trace</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="net.lewisship.trace.html#var-*compile-trace*"><div class="inner"><span>*compile-trace*</span></div></a></li><li class="depth-1"><a href="net.lewisship.trace.html#var-*enable-trace*"><div class="inner"><span>*enable-trace*</span></div></a></li><li class="depth-1"><a href="net.lewisship.trace.html#var-set-compile-trace.21"><div class="inner"><span>set-compile-trace!</span></div></a></li><li class="depth-1"><a href="net.lewisship.trace.html#var-set-enable-trace.21"><div class="inner"><span>set-enable-trace!</span></div></a></li><li class="depth-1"><a href="net.lewisship.trace.html#var-setup-default"><div class="inner"><span>setup-default</span></div></a></li><li class="depth-1"><a href="net.lewisship.trace.html#var-trace"><div class="inner"><span>trace</span></div></a></li><li class="depth-1"><a href="net.lewisship.trace.html#var-trace.3E"><div class="inner"><span>trace&gt;</span></div></a></li><li class="depth-1"><a href="net.lewisship.trace.html#var-trace.3E.3E"><div class="inner"><span>trace&gt;&gt;</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">net.lewisship.trace</h1><div class="doc"><div class="markdown"><p>Light-weight, asynchronous logging built around <code>clojure.core/tap&gt;</code>.</p>
<p>Follows the same pattern as <code>clojure.core/assert</code>: When tracing is not compiled, the tracing macros should create no runtime overhead.</p>
<p>When tracing is compiled, a check occurs to see if tracing is enabled; only then do the most expensive operations (e.g., identifying the function containing the trace call) occur, as well as the call to <code>clojure.core/tap&gt;</code>.</p>
</div></div><div class="public anchor" id="var-*compile-trace*"><h3>*compile-trace*</h3><h4 class="dynamic">dynamic</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>If false (the default), calls to <code>trace</code> evaluate to nil (and <code>trace&gt;</code> and <code>trace&gt;&gt;</code> simply return the threaded value).</p>
</div></div><div class="src-link"><a href="https://github.com/hlship/trace/blob/master/src/net/lewisship/trace.clj#L28">view source</a></div></div><div class="public anchor" id="var-*enable-trace*"><h3>*enable-trace*</h3><h4 class="dynamic">dynamic</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>If false (the default is true) then compiled calls to <code>trace</code> (and <code>trace&gt;</code> and <code>trace&gt;&gt;</code>) are a no-op.</p>
</div></div><div class="src-link"><a href="https://github.com/hlship/trace/blob/master/src/net/lewisship/trace.clj#L33">view source</a></div></div><div class="public anchor" id="var-set-compile-trace.21"><h3>set-compile-trace!</h3><div class="usage"><code>(set-compile-trace! value)</code></div><div class="doc"><div class="markdown"><p>Sets the default value of the <code>*compile-trace*</code> var.</p>
<p>Remember that after changing this, it may be necessary to re-load namespaces for the change to take effect.</p>
</div></div><div class="src-link"><a href="https://github.com/hlship/trace/blob/master/src/net/lewisship/trace.clj#L38">view source</a></div></div><div class="public anchor" id="var-set-enable-trace.21"><h3>set-enable-trace!</h3><div class="usage"><code>(set-enable-trace! value)</code></div><div class="doc"><div class="markdown"><p>Sets the default value of the <code>*enable-trace*</code> var.</p>
<p>Changes take effect immediately.</p>
</div></div><div class="src-link"><a href="https://github.com/hlship/trace/blob/master/src/net/lewisship/trace.clj#L45">view source</a></div></div><div class="public anchor" id="var-setup-default"><h3>setup-default</h3><div class="usage"><code>(setup-default)</code></div><div class="doc"><div class="markdown"><p>Enables tracing output with a default tap of <code>pprint</code>.</p>
</div></div><div class="src-link"><a href="https://github.com/hlship/trace/blob/master/src/net/lewisship/trace.clj#L140">view source</a></div></div><div class="public anchor" id="var-trace"><h3>trace</h3><h4 class="type">macro</h4><div class="usage"><code>(trace &amp; kvs)</code></div><div class="doc"><div class="markdown"><p>Calls to trace generate a map that is passed to <code>tap&gt;</code>.</p>
<p>The map includes keys:</p>
<ul>
<li>:in - a symbol of the namespace and function</li>
<li>:line - the line number of the trace invocation (if available)</li>
<li>:thread - the string name of the current thread</li>
</ul>
<p>Additional keys and values may be supplied.</p>
<p><code>trace</code> expands to nil, if compilation is disabled.</p>
<p>Any invocation of trace evaluates to nil.</p>
</div></div><div class="src-link"><a href="https://github.com/hlship/trace/blob/master/src/net/lewisship/trace.clj#L85">view source</a></div></div><div class="public anchor" id="var-trace.3E"><h3>trace&gt;</h3><h4 class="type">macro</h4><div class="usage"><code>(trace&gt; value &amp; kvs)</code></div><div class="doc"><div class="markdown"><p>A version of <code>trace</code> that works inside <code>-&gt;</code> thread expressions.  Within the trace body, <code>%</code> is bound to the threaded value. When compilation is disabled, it simply evaluates to the threaded value.</p>
</div></div><div class="src-link"><a href="https://github.com/hlship/trace/blob/master/src/net/lewisship/trace.clj#L106">view source</a></div></div><div class="public anchor" id="var-trace.3E.3E"><h3>trace&gt;&gt;</h3><h4 class="type">macro</h4><div class="usage"><code>(trace&gt;&gt; &amp; kvs-then-value)</code></div><div class="doc"><div class="markdown"><p>A version of <code>trace</code> that works inside <code>-&gt;&gt;</code> thread expressions.  Within the trace body, <code>%</code> is bound to the threaded value.  When compilation is disabled, it simply evaluates to the threaded value.</p>
</div></div><div class="src-link"><a href="https://github.com/hlship/trace/blob/master/src/net/lewisship/trace.clj#L120">view source</a></div></div></div></body></html>